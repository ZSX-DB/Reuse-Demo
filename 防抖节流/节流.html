<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>节流</title>
    <style>
        .scroll-box{
            width: 200px;
            height: 1920px;
            background-color: #8fd3f4;
        }
    </style>
</head>
<body>

<p>节流的概念是设定一个周期，周期内只执行一次</p>
<p>若有新的事件触发则不执行，周期结束后又有新的事件触发开始新的周期</p>

<div class="scroll-box"></div>

<script>
    function throttling (method, wait) {
        let start, timer
        return function run () {
            let self = this
            let args = arguments
            if (!start) {
                start = Date.now()
            }
            if (Date.now() - start >= wait) {
                method.apply(self, args)
                start = timer = void 0
            } else {
                timer && clearTimeout(timer)
                timer = setTimeout( ()=> {
                    run.apply(self, args)
                }, wait)
            }
        }
    }
    function scroll() {
        console.log('触发了')
    }
    document.addEventListener('scroll', throttling(scroll, 2000))
</script>

</body>
</html>